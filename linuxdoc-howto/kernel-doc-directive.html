
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>kernel-doc in reST documents &#8212; LinuxDoc 20200812 documentation</title>
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_tabs/tabs.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples &amp; Tests" href="kernel-doc-examples.html" />
    <link rel="prev" title="kernel-doc syntax" href="kernel-doc-syntax.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = '../';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="kernel-doc-examples.html" title="Examples &amp; Tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="kernel-doc-syntax.html" title="kernel-doc syntax"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">LinuxDoc 20200812 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">LinuxDoc HowTo</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="kernel-doc-in-rest-documents">
<span id="kernel-doc-directive"></span><h1>kernel-doc in reST documents<a class="headerlink" href="#kernel-doc-in-rest-documents" title="Permalink to this headline">¶</a></h1>
<p>To integrate <a class="reference internal" href="kernel-doc-syntax.html#kernel-doc-syntax"><span class="std std-ref">kernel-doc</span></a> comments into a reST document
(e.g. in a <em>book</em>), there exists a <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html#directives">reST-directive</a> named <code class="docutils literal notranslate"><span class="pre">kernel-doc</span></code> .  The
directive comes with options to fine grain control which parts should be placed
into the reST document.  With no options given, the complete kernel-doc comments
from a source file will be inserted. So, the first and very simple example is:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="gh">My Media Book</span>
<span class="gh">=============</span>

<span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> include/media/media-device.h
</pre></div>
</div>
<p>With this small example the kernel-doc comments from the media-device.h will be
inserted direct under the chapter “My Media Book”. The “DOC:” sections, the function
and the type descriptions will be inserted in the order they appear in the source file.
Mostly you want to select more fine grained, read on to see how.</p>
<div class="section" id="kernel-doc-options">
<span id="id1"></span><h2>kernel-doc options<a class="headerlink" href="#kernel-doc-options" title="Permalink to this headline">¶</a></h2>
<p>Here is a short overview of the directives options:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> <span class="nt">&lt;src-filename&gt;</span>
    <span class="nc">:doc:</span> <span class="nt">&lt;section title&gt;</span>
    <span class="nc">:no-header:</span>
    <span class="nc">:export:</span>
    <span class="nc">:internal:</span>
    <span class="nc">:exp-method:</span> <span class="nt">&lt;method&gt;</span>
    <span class="nc">:exp-ids:</span>    <span class="nt">&lt;identifier [, identifiers [, ...]]&gt;</span>
    <span class="nc">:functions:</span> <span class="nt">&lt;function [, functions [, ...]]&gt;</span>
    <span class="nc">:module:</span>    <span class="nt">&lt;prefix-id&gt;</span>
    <span class="nc">:man-sect:</span>  <span class="nt">&lt;man sect-no&gt;</span>
    <span class="nc">:snippets:</span>  <span class="nt">&lt;snippet [, snippets [, ...]]&gt;</span>
    <span class="nc">:language:</span>  <span class="nt">&lt;snippet-lang&gt;</span>
    <span class="nc">:linenos:</span>
    <span class="nc">:debug:</span>
</pre></div>
</div>
<p>The argument <code class="docutils literal notranslate"><span class="pre">&lt;src-filename&gt;</span></code> is required, it points to a source file in the
kernel source tree. The pathname is relative to kernel’s root folder.  The
options have the following meaning, but be aware that not all combinations of
these options make sense:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">:doc:</span> <span class="pre">&lt;section</span> <span class="pre">title&gt;</span></code> (<a class="reference internal" href="kernel-doc-tests.html#doc-sections"><span class="std std-ref">DOC sections</span></a>)</dt><dd><p>Include content of the <code class="docutils literal notranslate"><span class="pre">DOC:</span></code> section titled <code class="docutils literal notranslate"><span class="pre">&lt;section</span> <span class="pre">title&gt;</span></code>.  Spaces
are allowed in <code class="docutils literal notranslate"><span class="pre">&lt;section</span> <span class="pre">title&gt;</span></code>; do not quote the <code class="docutils literal notranslate"><span class="pre">&lt;section</span> <span class="pre">title&gt;</span></code>.</p>
<p>The next option make only sense in conjunction with option <code class="docutils literal notranslate"><span class="pre">doc</span></code>:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">:no-header:</span></code> (<a class="reference internal" href="kernel-doc-tests.html#opt-no-header"><span class="std std-ref">option :no-header:</span></a>)</dt><dd><p>Do not output DOC: section’s title. Useful, if the surrounding context
already has a heading, and the DOC: section title is only used as an
identifier.  Take in mind, that this option will not suppress any native
reST heading markup in the comment.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:export:</span> <span class="pre">[&lt;src-fname-pattern&gt;</span> <span class="pre">[,</span> <span class="pre">...]]</span></code> (<a class="reference internal" href="kernel-doc-tests.html#exported-symbols"><span class="std std-ref">exported symbols</span></a>)</dt><dd><p>Include documentation for all function, struct or whatever definition in
<code class="docutils literal notranslate"><span class="pre">&lt;src-filename&gt;</span></code>, exported using EXPORT_SYMBOL macro (<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code>,
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL_FUTURE</span></code>) either in
<code class="docutils literal notranslate"><span class="pre">&lt;src-filename&gt;</span></code> or in any of the files specified by
<code class="docutils literal notranslate"><span class="pre">&lt;src-fname-pattern&gt;</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;src-fname-pattern&gt;</span></code> (glob) is useful when the kernel-doc comments
have been placed in header files, while EXPORT_SYMBOL are next to the
function definitions.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:internal:</span> <span class="pre">[&lt;src-fname-pattern&gt;</span> <span class="pre">[,</span> <span class="pre">...]]</span></code> (<a class="reference internal" href="kernel-doc-tests.html#opt-internal"><span class="std std-ref">option :internal:</span></a>)</dt><dd><p>Include documentation for all documented definitions, <strong>not</strong> exported using
EXPORT_SYMBOL macro either in <code class="docutils literal notranslate"><span class="pre">&lt;src-filename&gt;</span></code> or in any of the files
specified by <code class="docutils literal notranslate"><span class="pre">&lt;src-fname-pattern&gt;</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:exp-method:</span> <span class="pre">&lt;method&gt;</span></code></dt><dd><p>Change the way exported symbols are specified in source code.  Default value
<code class="docutils literal notranslate"><span class="pre">macro</span></code> if not provided, can be set globally by
<a class="reference internal" href="#kernel-doc-config"><span class="std std-ref">kernel_doc_exp_method</span></a> in the sphinx <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html">conf.py</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;method&gt;</span></code> must one of
the following value:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">macro</span></code></dt><dd><p>Exported symbols are specified by macros (whose names are controlled by
<code class="docutils literal notranslate"><span class="pre">exp-ids</span></code> option) invoked in the source the following way:
<code class="docutils literal notranslate"><span class="pre">THIS_IS_AN_EXPORTED_SYMBOL(symbol)</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attribute</span></code></dt><dd><p>Exported symbols are specified definition using a specific attribute
(controlled by <code class="docutils literal notranslate"><span class="pre">exp-ids</span></code> option) either in their declaration or
definition: <code class="docutils literal notranslate"><span class="pre">THIS_IS_AN_EXPORTED_SYMBOL</span> <span class="pre">int</span> <span class="pre">symbol(void*</span> <span class="pre">some_arg)</span>
<span class="pre">{...}</span></code></p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:exp-ids:</span> <span class="pre">&lt;identifier</span> <span class="pre">[,</span> <span class="pre">identifiers</span> <span class="pre">[,</span> <span class="pre">...]]&gt;</span></code></dt><dd><p>Use the specified list of identifiers instead of default value:
EXPORT_SYMBOL, EXPORT_SYMBOL_GPL, EXPORT_SYMBOL_GPL_FUTURE.  Default value
can be overriden globally by sphinx <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html">conf.py</a> option <a class="reference internal" href="#kernel-doc-config"><span class="std std-ref">kernel_doc_exp_ids</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:known-attrs:</span> <span class="pre">&lt;attr</span> <span class="pre">[,</span> <span class="pre">attrs</span> <span class="pre">[,</span> <span class="pre">...]]&gt;</span></code></dt><dd><p>Specified a list of function attributes that are known and must be hidden
when displaying function prototype.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">:exp-method:</span></code> is set to <code class="docutils literal notranslate"><span class="pre">attribute</span></code> the list in <code class="docutils literal notranslate"><span class="pre">:exp-ids:</span></code> is
considered as known and added implicitly to this list of known attributes.
The default list is empty and can be adjusted by the sphinx configuration
option <a class="reference internal" href="#kernel-doc-config"><span class="std std-ref">kernel_doc_known_attrs</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:functions:</span> <span class="pre">&lt;name</span> <span class="pre">[,</span> <span class="pre">names</span> <span class="pre">[,</span> <span class="pre">...]]&gt;</span></code> (<a class="reference internal" href="#kernel-doc-functions"><span class="std std-ref">functions</span></a>, <a class="reference internal" href="#kernel-doc-structs"><span class="std std-ref">structs, unions, enums and typedefs</span></a>)</dt><dd><p>Include documentation for each named definition.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:module:</span> <span class="pre">&lt;prefix-id&gt;</span></code></dt><dd><p>The option <code class="docutils literal notranslate"><span class="pre">:module:</span> <span class="pre">&lt;id-prefix&gt;</span></code> sets a module-name.  The module-name is
used as a prefix for automatic generated IDs (reference anchors).  To give a
example, if you like to refer <code class="docutils literal notranslate"><span class="pre">my_struct</span></code> from module <code class="docutils literal notranslate"><span class="pre">example</span></code> use
<code class="docutils literal notranslate"><span class="pre">:ref:`example.my_struct`</span></code> (<a class="reference internal" href="all-in-a-tumble.html#example-my-struct"><span class="std std-ref">struct my_struct</span></a>).  See module
<code class="docutils literal notranslate"><span class="pre">test</span></code> in the <a class="reference internal" href="kernel-doc-tests.html#doc-sections"><span class="std std-ref">DOC sections</span></a> example.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:man-sect:</span> <span class="pre">&lt;sect-no&gt;</span></code></dt><dd><p>Section number of the manual pages (see “<code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">man</span> <span class="pre">man-pages</span></code>””).  Optional set
<a class="reference internal" href="#kernel-doc-config"><span class="std std-ref">kernel_doc_mansect</span></a> option in sphinx <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html">conf.py</a>.  The
man-pages are build by the <code class="docutils literal notranslate"><span class="pre">kernel-doc-man</span></code> builder.  Read on here:
<a class="reference internal" href="man-pages.html#man-pages"><span class="std std-ref">man pages from kernel-doc comments</span></a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:snippets:</span> <span class="pre">&lt;name</span> <span class="pre">[,</span> <span class="pre">names</span> <span class="pre">[,</span> <span class="pre">...]]&gt;</span></code></dt><dd><p>Inserts the source-code passage(s) marked with the snippet <code class="docutils literal notranslate"><span class="pre">name</span></code>. The
snippet is inserted with a <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/code.html">code-block::</a>
directive.</p>
<p>The next options make only sense in conjunction with option <code class="docutils literal notranslate"><span class="pre">snippets</span></code>:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">language</span> <span class="pre">&lt;highlighter&gt;</span></code></dt><dd><p>Set highlighting language of the snippet code-block.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">linenos</span></code></dt><dd><p>Set line numbers in the snippet code-block.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">:debug:</span></code></dt><dd><p>Inserts a code-block with the generated reST source. This might sometimes
helpful to see how the kernel-doc parser transforms the kernel-doc markup to
reST markup.</p>
</dd>
</dl>
</div>
<div class="section" id="functions">
<span id="kernel-doc-functions"></span><h2>functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>The following example inserts the documentation of struct ‘user_function’.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> ./all-in-a-tumble.h
   <span class="nc">:functions:</span>  user_function
   <span class="nc">:module:</span>     example
</pre></div>
</div>
<p>These <code class="docutils literal notranslate"><span class="pre">example</span></code> module has already been defined in our <a class="reference internal" href="all-in-a-tumble-debug.html#all-in-a-tumble-debug"><span class="std std-ref">all-in-a-tumble
examples</span></a>, lets use it to show how to link such a
documentation:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="m">*</span> Rendered example by ID with module prefix: <span class="na">:ref:</span><span class="nv">`example.user_function`</span>
<span class="m">*</span> Function reference: <span class="na">:c:func:</span><span class="nv">`user_function`</span>
</pre></div>
</div>
<div class="rst-example admonition">
<p class="admonition-title">option <code class="docutils literal notranslate"><span class="pre">:functions:</span></code></p>
<ul class="simple">
<li><p>Rendered example by ID with module prefix: <a class="reference internal" href="all-in-a-tumble.html#example-user-function"><span class="std std-ref">user_function</span></a></p></li>
<li><p>Function reference: <a class="reference internal" href="kernel-doc-tests.html#c.user_function" title="user_function"><code class="xref c c-func docutils literal notranslate"><span class="pre">user_function()</span></code></a></p></li>
</ul>
</div>
</div>
<div class="section" id="structs-unions-enums-and-typedefs">
<span id="kernel-doc-typedefs"></span><span id="kernel-doc-enums"></span><span id="kernel-doc-unions"></span><span id="kernel-doc-structs"></span><h2>structs, unions, enums and typedefs<a class="headerlink" href="#structs-unions-enums-and-typedefs" title="Permalink to this headline">¶</a></h2>
<p>The following example inserts the documentation of struct ‘my_long_struct’.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> ./all-in-a-tumble.h
   <span class="nc">:functions:</span>  my_long_struct
   <span class="nc">:module:</span>     example
</pre></div>
</div>
<p>To link into the <a class="reference internal" href="all-in-a-tumble-debug.html#all-in-a-tumble-debug"><span class="std std-ref">all-in-a-tumble examples</span></a> use:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="m">*</span> Rendered example by ID with module prefix: <span class="na">:ref:</span><span class="nv">`example.my_long_struct`</span>
<span class="m">*</span> Type reference: <span class="na">:c:type:</span><span class="nv">`my_long_struct`</span> or the alternativ notation
  with title <span class="na">:c:type:</span><span class="nv">`struct my_long_struct &lt;my_long_struct&gt;`</span>
</pre></div>
</div>
<div class="rst-example admonition">
<p class="admonition-title">option <code class="docutils literal notranslate"><span class="pre">:functions:</span> <span class="pre">structs,</span> <span class="pre">unions,</span> <span class="pre">enums</span> <span class="pre">and</span> <span class="pre">typedefs</span></code></p>
<ul class="simple">
<li><p>Rendered example by ID with module prefix: <a class="reference internal" href="all-in-a-tumble.html#example-my-long-struct"><span class="std std-ref">struct my_long_struct</span></a></p></li>
<li><p>Type reference: <a class="reference internal" href="all-in-a-tumble.html#c.my_long_struct" title="my_long_struct"><code class="xref c c-type docutils literal notranslate"><span class="pre">my_long_struct</span></code></a> or the alternativ notation
with title <a class="reference internal" href="all-in-a-tumble.html#c.my_long_struct" title="my_long_struct"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">my_long_struct</span></code></a></p></li>
</ul>
</div>
</div>
<div class="section" id="snippets">
<span id="kernel-doc-snippets"></span><h2>Snippets<a class="headerlink" href="#snippets" title="Permalink to this headline">¶</a></h2>
<p>The kernel-doc Parser supports a markup for <a class="reference internal" href="kernel-doc-syntax.html#kernel-doc-syntax-snippets"><span class="std std-ref">Snippets</span></a>.
By example; In the the <a class="reference internal" href="all-in-a-tumble-src.html#all-in-a-tumble-c-src"><span class="std std-ref">all-in-a-tumble examples</span></a>
we have a small source code example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* parse-SNIP: hello-world */</span>
<span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/* parse-SNAP: */</span>
</pre></div>
</div>
<p>To insert the code passage between SNIP &amp; SNAP use:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span>  ./all-in-a-tumble.c
   <span class="nc">:snippets:</span>  hello-world
   <span class="nc">:language:</span>  c
   <span class="nc">:linenos:</span>
</pre></div>
</div>
<p>And here is the rendered example:</p>
<blockquote>
<div><div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>
<div class="section" id="man-pages-man-sect">
<span id="kernel-doc-man-sect"></span><h2>man pages (:man-sect:)<a class="headerlink" href="#man-pages-man-sect" title="Permalink to this headline">¶</a></h2>
<p>To get man pages from kernel-doc comments, add the <code class="docutils literal notranslate"><span class="pre">:man-sect:</span></code> option to your
kernel-doc directives.  E.g. to get man-pages of media’s remote control (file
<code class="docutils literal notranslate"><span class="pre">media/kapi/rc-core.rst</span></code>) add <code class="docutils literal notranslate"><span class="pre">:man-sect:</span> <span class="pre">9</span></code> to all the kernel-doc includes.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="gh">Remote Controller devices</span>
<span class="gh">=========================</span>

<span class="gh">Remote Controller core</span>
<span class="gh">----------------------</span>

<span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> include/media/rc-core.h
   <span class="nc">:man-sect:</span> 9

<span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> include/media/rc-map.h
   <span class="nc">:man-sect:</span> 9

<span class="gh">LIRC</span>
<span class="gh">----</span>

<span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span> include/media/lirc_dev.h
   <span class="nc">:man-sect:</span> 9
</pre></div>
</div>
<p>If you don’t want to edit all your kernel-doc directives to get man page from,
set a global man-sect in your <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>, see sphinx configuration
<a class="reference internal" href="#kernel-doc-config"><span class="std std-ref">kernel_doc_mansect</span></a> and about build look at:
<a class="reference internal" href="man-pages.html#man-pages"><span class="std std-ref">man pages from kernel-doc comments</span></a></p>
</div>
<div class="section" id="highlights-and-cross-references">
<h2>Highlights and cross-references<a class="headerlink" href="#highlights-and-cross-references" title="Permalink to this headline">¶</a></h2>
<p>The following special patterns are recognized in the kernel-doc comment
descriptive text and converted to proper reStructuredText markup and <a class="reference external" href="http://www.sphinx-doc.org/en/stable/domains.html#cross-referencing-c-constructs">Sphinx’s C
Domain</a> references.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The below are <strong>only</strong> recognized within kernel-doc comments, <strong>not</strong> within
normal reStructuredText documents.</p>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">funcname()</span></code></dt><dd><p>Function reference.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&#64;parameter</span></code></dt><dd><p>Name of a function parameter. (No cross-referencing, just formatting.)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">%CONST</span></code></dt><dd><p>Name of a constant. (No cross-referencing, just formatting.)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">``literal``</span></code></dt><dd><p>A literal block that should be handled as-is. The output will use a
<code class="docutils literal notranslate"><span class="pre">monospaced</span> <span class="pre">font</span></code>.</p>
<p>Useful if you need to use special characters that would otherwise have some
meaning either by kernel-doc script of by reStructuredText.</p>
<p>This is particularly useful if you need to use things like <code class="docutils literal notranslate"><span class="pre">%ph</span></code> inside
a function description.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">$ENVVAR</span></code></dt><dd><p>Name of an environment variable. (No cross-referencing, just formatting.)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;struct</span> <span class="pre">name</span></code></dt><dd><p>Structure reference.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;enum</span> <span class="pre">name</span></code></dt><dd><p>Enum reference.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;typedef</span> <span class="pre">name</span></code></dt><dd><p>Typedef reference.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;struct_name-&gt;member</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;struct_name.member</span></code></dt><dd><p>Structure or union member reference. The cross-reference will be to the struct
or union definition, not the member directly.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;name</span></code></dt><dd><p>A generic type reference. Prefer using the full reference described above
instead. This is mostly for legacy comments.</p>
</dd>
</dl>
</div>
<div class="section" id="kernel-doc-config">
<span id="id2"></span><h2>kernel-doc config<a class="headerlink" href="#kernel-doc-config" title="Permalink to this headline">¶</a></h2>
<p>Within the <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html">sphinx config</a> file (<code class="docutils literal notranslate"><span class="pre">conf.py</span></code> or <code class="docutils literal notranslate"><span class="pre">my_project.conf</span></code>) you can
set the following option.</p>
<dl>
<dt>kernel_doc_exp_method: <code class="docutils literal notranslate"><span class="pre">macro</span></code></dt><dd><p>Set parser’s default value for kernel-doc directive option  <code class="docutils literal notranslate"><span class="pre">:exp-method:</span></code>
(details see: <a class="reference internal" href="#kernel-doc-options"><span class="std std-ref">kernel-doc options</span></a>)</p>
</dd>
<dt>kernel_doc_exp_ids: <code class="docutils literal notranslate"><span class="pre">['EXPORT_SYMBOL',</span> <span class="pre">'EXPORT_SYMBOL_GPL',</span> <span class="pre">'EXPORT_SYMBOL_GPL_FUTURE']</span></code></dt><dd><p>Set parser’s default value for kernel-doc directive option <code class="docutils literal notranslate"><span class="pre">:exp-ids:</span></code>.
(details see: <a class="reference internal" href="#kernel-doc-options"><span class="std std-ref">kernel-doc options</span></a>)</p>
</dd>
<dt>kernel_doc_known_attrs: <code class="docutils literal notranslate"><span class="pre">[...]</span></code></dt><dd><p>Set parser’s default value for kernel-doc directive option  <code class="docutils literal notranslate"><span class="pre">:known-attrs:</span></code>
(details see: <a class="reference internal" href="#kernel-doc-options"><span class="std std-ref">kernel-doc options</span></a>)</p>
</dd>
<dt>kernel_doc_mansect: <code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>Global fallback for man section of kernel-doc directives.  Set this value if
you want to create man pages for those kernel-doc directives, which has not
been set a <code class="docutils literal notranslate"><span class="pre">:man-sect:</span></code> value.  The default is <code class="docutils literal notranslate"><span class="pre">None</span></code>, which means; do the
opposite and create only man pages for those directives which has been set the
<code class="docutils literal notranslate"><span class="pre">:man-sect:</span></code> option (<code class="docutils literal notranslate"><span class="pre">None</span></code> is what you mostly want).</p>
</dd>
<dt>kernel_doc_mode: <code class="docutils literal notranslate"><span class="pre">reST</span></code></dt><dd><p>Set parser’s default kernel-doc mode <code class="docutils literal notranslate"><span class="pre">[reST|kernel-doc]</span></code>.  Normally you wont
set anything other than the default! See <a class="reference internal" href="reST-kernel-doc-mode.html#rest-kernel-doc-mode"><span class="std std-ref">reST kernel-doc mode</span></a> and
<a class="reference internal" href="vintage-kernel-doc-mode.html#vintage-kernel-doc-mode"><span class="std std-ref">Vintage kernel-doc mode</span></a>.</p>
</dd>
<dt>kernel_doc_verbose_warn: <code class="docutils literal notranslate"><span class="pre">True</span></code></dt><dd><p>If true, more warnings will be logged.  E.g. a missing description of a
function’s return value will be logged.</p>
</dd>
<dt>kernel_doc_raise_error: <code class="docutils literal notranslate"><span class="pre">True</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> fatal errors (like missing function descriptions) raise an error.
The default is <code class="docutils literal notranslate"><span class="pre">True</span></code>. This means that the build process break every time a
serve error in the documentation build occur.  Often it might be better the
build continues and inserts Oops on serve errors.  For this, set
<code class="docutils literal notranslate"><span class="pre">kernel_doc_raise_error</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.  In the next example, the
documentation of a non existing definition name <code class="docutils literal notranslate"><span class="pre">no_longer_exists</span></code> is
required:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">kernel-doc</span><span class="p">::</span>  ./all-in-a-tumble.h
    <span class="nc">:functions:</span>  no_longer_exist
</pre></div>
</div>
<p>Since this definition not exists (anymore), the following TODO entry with Oops
is inserted (again; only when <code class="docutils literal notranslate"><span class="pre">kernel_doc_raise_error</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p>
<div class="rst-example admonition">
<p class="admonition-title">parser error inserts a “.. todo::” directive with <em>Oops</em> in</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Oops: Document generation inconsistency.</p>
<p>The template for this document tried to insert structured comment at this point, but an error occoured. This dummy section is inserted to allow generation to continue.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/share/linuxdoc/docs/linuxdoc-howto/kernel-doc-directive.rst:394: (ERROR/3) selected section(s) not found:
    no_longer_exist

.. kernel-doc::  ./all-in-a-tumble.h
   :functions:  no_longer_exist
</pre></div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/darmarIT_logo_128.png" alt="Logo"/>
            </a></p>
  

  <h3>Project Links</h3>
  <ul>
    <li><a href="https://return42.github.io/linuxdoc">Home</a>
  
    <li><a href="https://github.com/return42/linuxdoc">Source</a>
  
    <li><a href="https://return42.github.io/linuxdoc/linuxdoc-api/linuxdoc.html">API</a>
  </ul><h3>Navigation</h3>
<ul>
  <li><a href="../index.html">Overview</a>
    <ul>
      <li><a href="index.html">LinuxDoc HowTo</a>
        <ul>
          <li>Previous: <a href="kernel-doc-syntax.html" title="previous chapter">kernel-doc syntax</a>
          <li>Next: <a href="kernel-doc-examples.html" title="next chapter">Examples &amp; Tests</a></ul>
      </li>
    </ul>
  </li>
</ul>
  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">kernel-doc in reST documents</a><ul>
<li><a class="reference internal" href="#kernel-doc-options">kernel-doc options</a></li>
<li><a class="reference internal" href="#functions">functions</a></li>
<li><a class="reference internal" href="#structs-unions-enums-and-typedefs">structs, unions, enums and typedefs</a></li>
<li><a class="reference internal" href="#snippets">Snippets</a></li>
<li><a class="reference internal" href="#man-pages-man-sect">man pages (:man-sect:)</a></li>
<li><a class="reference internal" href="#highlights-and-cross-references">Highlights and cross-references</a></li>
<li><a class="reference internal" href="#kernel-doc-config">kernel-doc config</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020 Markus Heiser.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  <script src="../_static/version_warning_offset.js"></script>

  </body>
</html>